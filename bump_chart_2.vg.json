{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": "Unemployment Rate Ranking by Continent",
    "width": "600",
    "height": 280,
    "data": {
        "url": "https://raw.githubusercontent.com/YAPQIANTING/FIT3179-A2/main/datas/continent_working_poverty_data.csv",
        "format": { "type": "csv" }
    },
    "params": [
        {
            "name": "continent_selection",
            "bind": {
                "input": "select",
                "options": [
                    null,
                    "Africa",
                    "Asia",
                    "Europe",
                    "Americas"
                ],
                "labels": [
                    "Show All",
                    "Africa",
                    "Asia",
                    "Europe",
                    "Americas"
                ],
                "name": "Continent: "
            }
        }
    ],
    "transform": [
        {
            "window": [
            { "op": "rank", "as": "Rank" }
            ],
            "sort": [
                { "field": "Working Poverty Rate", "order": "descending" }
            ],
            "groupby": ["Year"]
        },
        {
            "filter": "continent_selection == null || datum.Continent == continent_selection"
        }
    ],
    "layer": [
      {
        "mark": {
            "type": "line",
            "point": {
                "size": 100,
                "filled": true
            },
            "interpolate": "monotone",
            "strokeWidth": 3
            },
            "encoding": {
            "x": {
                "field": "Year",
                "type": "temporal",
                "title": "Year"
            },
            "y": {
                "field": "Rank",
                "type": "quantitative",
                "scale": {
                    "reverse": true,
                    "domain": [0, 5]
                },
                "title": "Working Poverty Rate Rank",
                "axis": {
                    "grid": false
                }
            },
            "color": {
                "field": "Continent",
                "type": "nominal",
                "title": "Continent",
                "scale": {
                "domain": [
                    "Africa", "Asia", "Europe", "Americas"
                ],
                "range": [
                    "#fdae61", "#91bfdb", "#fee08b", "#4575b4"
                ]
                }
            },
            "tooltip": [
                    { "field": "Year", "type": "temporal", "title": "Year", "format": "%Y" },
                    { "field": "Continent", "type": "nominal", "title": "Continent" },
                    { "field": "Working Poverty Rate", "type": "quantitative", "title": "Working Poverty Rate (%)", "format": ".2f" },
                    { "field": "Rank", "type": "quantitative", "title": "Rank" }
            ]
        }
      },
      {
        "mark": {
            "type": "text",
            "align": "center",
            "baseline": "middle",
            "fontSize": 12,
            "dx": -70,
            "dy": -120
        },
        "encoding": {
            "text": {
                "value": "Economic shift in 2017: Poverty worsened in Asia, improved in Africa."
            }
        }
      }
    ]
  }
  